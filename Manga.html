<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DCmanga</title>
    <link rel="icon" type="icon" href="Images/Iconpng.png">
    <link rel="stylesheet" href="Styles.css">

    <script>
        function seek() {

            let anime = document.getElementById("Buscador").value;

            if (!isNaN(anime)) {
                alert(anime);
                const url = `https://kitsu.io/api/edge/manga/${parseInt(anime)}`;
                console.log(url);
                fetch(url)
                    .then((response) => response.json())
                    .then((data) => {
                        const animeData = data.data.attributes;
                        document.getElementById("Title_2").textContent = animeData.titles["en"];
                        document.getElementById("Title").textContent = animeData.titles["en_jp"];
                        document.getElementById("Title_3").textContent = animeData.titles["ja_jp"];
                        document.getElementById("Type").textContent = animeData.subtype;
                        document.getElementById("Rating").textContent = animeData.averageRating;
                        document.getElementById("Releaseddate").textContent = animeData.startDate;
                        document.getElementById("Status").textContent = animeData.status;
                        document.getElementById("OtherNames").textContent = animeData.titles.en;
                        document.getElementById("Synopsis").textContent = animeData.synopsis;
                        document.getElementById("Image").src = animeData.posterImage.original;
                        document.getElementById("ch").textContent = animeData.chapterCount;
                        document.getElementById("vl").textContent = animeData.volumeCount;
                        document.getElementById("s").textContent = animeData.serialization;
                        document.getElementById("sd").textContent = animeData.startDate;
                        document.getElementById("ed").textContent = animeData.endDate;
                        document.getElementById("r").textContent = animeData.ageRatingGuide;
                    })
                    .catch((error) => {
                        console.error("Ocurrió un error al obtener los datos del anime:", error);
                    });

            } else {

                const url = `https://kitsu.io/api/edge/manga?filter[text]=${encodeURIComponent(anime)}`;
                fetch(url)
                    .then((response) => response.json())
                    .then((data) => {
                        const animeData = data.data[0].attributes;
                        animeId = data.data[0].id;
                        document.getElementById("Title_2").textContent = animeData.titles["en"];
                        document.getElementById("Title").textContent = animeData.titles["en_jp"];
                        document.getElementById("Title_3").textContent = animeData.titles["ja_jp"];
                        document.getElementById("Type").textContent = animeData.subtype;
                        document.getElementById("Rating").textContent = animeData.averageRating;
                        document.getElementById("Releaseddate").textContent = animeData.startDate;
                        document.getElementById("Status").textContent = animeData.status;
                        document.getElementById("OtherNames").textContent = animeData.titles.en;
                        document.getElementById("Synopsis").textContent = animeData.synopsis;
                        document.getElementById("Image").src = animeData.posterImage.original;
                        document.getElementById("ch").textContent = animeData.chapterCount;
                        document.getElementById("vl").textContent = animeData.volumeCount;
                        document.getElementById("s").textContent = animeData.serialization;
                        document.getElementById("sd").textContent = animeData.startDate;
                        document.getElementById("ed").textContent = animeData.endDate;
                        document.getElementById("r").textContent = animeData.ageRatingGuide;
                        document.getElementById("ID").textContent = animeId;

                    })
                    .catch((error) => {
                        console.error("Ocurrió un error al obtener los datos del anime:", error);
                    });
            }
        }


    </script>

</head>

<body>

    <header class="Animes">
        <nav>
            <ul>
                <div class=" icon">
                    <li> <img src="Images/fantasma.png" width="100" alt="Icon"></li>
                </div>
                <li class=" title">
                    <h1> Anime and Manga Seeker </h1>
                </li> <br>
                <li class=" option"><a href="index.html">Inicio</a></li>
                <li class=" option"><a href="Anime.html">Anime</a></li>
                <li class=" option"><a href="Manga.html">Manga</a></li>
            </ul>
        </nav>
    </header>

    <div class=" buscar">
        <label> Name </label>
        <input type="text" id="Buscador" />
        <button id="boton" type="button" onclick=" seek()"> Search </button>
    </div>

    <br><br>

    <h1>Manga Info</h1>

    <form class=" info">
        <div id="info">
            <h2> <label> <span id="Title_2"></span> <br><br>
                    <span id="Title"></span> <br>
                 </label><br>
                 <label> <span id="Title_3"></span></label>
            </h2>
            <p> <label>Type:</label> <span id="Type"></span></p>
            <p> <label>Rating:</label> <span id="Rating"></span></p>
            <p> <label>Released Date:</label> <span id="Releaseddate"></span></p>
            <p> <label>Status:</label> <span id="Status"></span></p>
            <p> <label>Other Names:</label> <span id="OtherNames"></span></p>
            <p> <label>Star Date:</label> <span id="sd"></span></p>
            <p> <label>End Date:</label> <span id="ed"></span></p>
            <p> <label>Age Rating:</label> <span id="r"></span></p>
            <p> <label>Chapters:</label> <span id="ch"></span></p>
            <p> <label>Vol:</label> <span id="vl"></span></p>
            <p> <label>serialization:</label> <span id="s"></span></p>
            <p> <label>Id:</label> <span id="ID"></span></p>
            <p class=" container"> <label style="text-align: justify;">Synopsis:</label> <br><br>
                <span id="Synopsis"></span>
            </p>
        </div>

        <img id="Image" src="Images/marinero.png" alt=":Image">

    </form>





</body>

</html>